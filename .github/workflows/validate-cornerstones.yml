name: Five Cornerstones Validation

on:
  push:
    branches: ['**']
  pull_request:
    branches: [main]

jobs:
  validate:
    name: Validate Five Cornerstones
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Deno
        uses: denoland/setup-deno@v1
        with:
          deno-version: v1.x

      - name: Run Five Cornerstones Validator
        continue-on-error: true
        id: validator
        run: |
          echo "ğŸ” Running Five Cornerstones validation..."
          echo ""

          # During prototype phase, validation is informational only
          if [ -d "src" ]; then
            echo "Validating production code..."
            deno run --allow-read .claude/tools/validate-cornerstones.ts src/
          else
            echo "â„¹ï¸  Phase 0: Prototype Development"
            echo "   Five Cornerstones principles being established"
            echo "   Validation will be enforced starting Phase 1"
            echo ""
            echo "âœ… Validation framework in place, ready for Phase 1"
          fi

      - name: Validation Summary
        if: always()
        run: |
          echo ""
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "âœ… Five Cornerstones validation complete"
          echo ""
          echo "This ensures all code adheres to Sophie's principles:"
          echo "  1. Configurability"
          echo "  2. Modularity"
          echo "  3. Extensibility"
          echo "  4. Integration"
          echo "  5. Automation"
